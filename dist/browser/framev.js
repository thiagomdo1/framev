(()=>{"use strict";var n=function(){return(n=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}).apply(this,arguments)},t=function(){function t(t){var e=this;this.prefix="framev:",this.settings={origin:"*"},this.subscriptions=[],t&&(this.settings=n(n({},this.settings),t)),window.addEventListener("message",(function(n){var t=n.data,i=n.origin,r=new RegExp(e.prefix,"i");if("*"!==e.settings.origin&&e.settings.origin!==i)return null;if(!t||"string"!=typeof t||-1===t.search(r))return null;var s=JSON.parse(t.replace(e.prefix,"")),o=s.event,a=s.payload;console.log(document.querySelector("button").innerText,o),e.emit(o,a,!0),e.subscriptions.forEach((function(n){if("function"!=typeof n.callback)return null;if(o===n.event)return n.callback(a),null;var t=n.event,e=t.replace("*",".*");e+="*"!==t[t.length-1]?"$":"";var i=new RegExp(e);o.search(i)>-1&&n.callback(a)}))}))}return t.prototype.emit=function(n,t,e){var i=this;if(!n||"string"!=typeof n)return null;var r={event:""+this.prefix+n};t&&(r.payload=t);var s=JSON.stringify(r);window.self===window.top||e?function(){if(!window.frames)return null;for(var n=0;n<window.frames.length;n++){var t=window.frames[n].frameElement.contentWindow;if(!t)return null;t.postMessage(s,i.settings.origin)}}():function(){if(!window.top)return null;window.top.postMessage(s,i.settings.origin)}()},t.prototype.on=function(n,t){if(!n||"string"!=typeof n)return null;this.subscriptions.some((function(e){return e.event===n&&e.callback===t}))||this.subscriptions.push({event:n,callback:t})},t.prototype.off=function(n,t){if(!n||"string"!=typeof n)return null;this.subscriptions=this.subscriptions.filter((function(e){return e.event!==n&&e.callback!==t}))},t}();window.Framev||(window.Framev=t)})();